<div class="page-layout simple fullwidth pb-30" layout="column" >
<style type="text/css">
.goal-header{
	height:160px;
}
.page-layout.simple.fullwidth > .header, .page-layout.simple.inner-sidenav > .header{
	height: 133px;
}
.page-layout.simple.fullwidth > .goal-header{
	min-height:80px;
	max-height:100%;
}
.chart-wrapper-outer{
	margin-bottom: 20px;
	border: 1px solid #E8E8E8;
	box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.15);
	margin: 20px;
	padding-top: 20px;
}
.chart_title{
	float: left;
	width: 90%;
	display: inline-block;
	margin: -15px 0 0 0;
	padding: 5px 0 8px 15px;
	font-size: 18px;
	color: #168dc5;
	border-bottom: 1px solid #e8e8e8;
}
.rzslider .rz-pointer.rz-active:after{
	background-color:#ff9201;
}
.mapChart{
	clear: both;
	display: block;
	position: relative;
	vertical-align: middle;
}
.land{
	fill: #e8e8e8;
	fill-opacity: 1;
	stroke:white;
	stroke-opacity: 1;
	stroke-width:0.5;
}
.inf {
    position: absolute;
    background: #ffffff;
    border: 1px solid #e8e8e8;
    width: 250px;
    margin: 0 0 0 -125px;
    padding: 8px;
    z-index: 9999;
    border-radius: 4px;
    font-size: 15px;
    line-height: 18px;
}
.inf:after {
	content: "";
    position: absolute;
    display: block;
    width: 0;
    height: 0;
    bottom: -10px;
    left: 50%;
    margin: 0 0 0 -10px;
    border-top: 10px solid #ffffff;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    z-index: 9999;
}

.inf .title {
    font-size: 17px;
    line-height: 20px;
    border-bottom: 1px solid #666666;
    text-align: center;
    color: #168dc5;
    padding: 0px 0 8px 0;
    margin: 0;
    display: block;
}
.inf .data {
    display: block;
    border-bottom: 1px dotted #e8e8e8;
    padding: 4px 0;
    margin: 0;
}


.map-leagend {
    width:60%;
    position: relative;
    margin:0 0 20px 20px;
    border: 1px solid #e8e8e8;
}
.map-leagend div {
    height: 30px;
    float: left;
}
.map-leagend div:first-child:before {
    content:"";
    position: absolute;
    top:-20px;
    left: -1px;
    width: 0;
    height: 20px;
    border-left: 1px solid #e8e8e8;
}
.map-leagend div:first-child:after {
    content:attr(data-value);
    position: absolute;
    display: inline-block;
    top:-20px;
    left: 5px;
    width: auto;
    height: 20px;
    font-size: 14px;
    line-height: 20px;
}
.map-leagend div:last-child:before {
    content:attr(data-value);
    position: absolute;
    display: inline-block;
    top:-20px;
    right: 5px;
    width: auto;
    height: 20px;
    font-size: 14px;
    line-height: 20px;
}
.map-leagend div:last-child:after {
    content:"";
    position: absolute;
    top:-20px;
    right: -1px;
    width: 0;
    height: 20px;
    border-right: 1px solid #e8e8e8;
}

.map-leagend:after {
    content:"";
    display: block;
    width: 100%;
    height: 0;
    clear:both;
}
.smaart-watermark{
	color: #d8d8d8;
    text-align: right;
    float: right;
    margin: -25px 0 0 0;
    padding: 0 20px 0 0;
}
.smaart-watermark a{
	color:#b2b2b2;
	text-decoration: none;
}
.smaart-watermark a:hover{
	color: #039be5;
    text-decoration: none;
}
</style>
    <div class="header md-accent-bg goal-header">
        <div flex>
            <span class="h2 white-fg">View Visualizations</span>
        </div>

    </div>

    <div layout="row" ng-if="filters.length == 0" layout-sm="column" layout-xs="column" layout-align="space-around stretch" class="mt-20 mh-10" style="margin-top: -67px;" id="iframe">

        <md-card flex="100" flex-sm="100" flex-xs="100" layout="column" class="md-background-bg " style="box-shadow: 0px 4px 5px -2px rgba(0, 0, 0, 0.2), 0px 7px 10px 1px rgba(0, 0, 0, 0.14), 0px 2px 16px 1px rgba(0, 0, 0, 0.12)">
            <div class="border-bottom " layout="row" layout-align="start center">
                <!-- <span flex layout="row" class="pv-15 pl-20">Visualization: {{charts.titles.chart_1}} 
                    <div class="mt-0">
                    <md-button class="md-icon-button" area-label="pencil" ng-click="editName($event,vm.dataset_id,dataset_name)" ng-controller="ViewVisualController">
                        <md-tooltip md-direction="top" class="md-body-1">
                            <span class="p-10">Edit name of the visualization</span>
                        </md-tooltip>
                        <md-icon md-font-icon="icon-pencil-box-outline" class="s24"></md-icon>
                    </md-button>
                </div>
                </span> -->
                <div flex="50" layout="row" style="max-height: 58px;padding-left: 2%" ng-controller="EditVisualController" ng-include="'app/main/visualizations/include/include_toolbar_left.html'">
                    
                </div>
                
                <span flex="50" layout="row" layout-align="end start" class="pv-5 pr-10">
                <md-button ui-sref="app.genvisuals_list" class="ph-15 md-accent md-raised"  layout="row" layout-align="space-between center">
                        <md-icon md-font-icon="icon-chart-bar" class="s20 mr-10"></md-icon>
                        <div><md-tooltip md-direction="top" class="md-body-1">List of all visualization </md-tooltip>All Visualization</div>
                    </md-button>
                <md-button class=" md-accent md-raised" layout="row" ng-click="edit()"><div layout="row"><md-icon flex="20" md-font-icon="icon-pencil" class="s20"></md-icon><div class="mr-10" flex="80"><md-tooltip md-direction="top" class="md-body-1">Edit the following datasets</md-tooltip>Edit Visualization</div></div></md-button>
                <md-button class=" md-accent md-raised" layout="row" ui-sref="app.visualizations_add"><div layout="row"><md-icon flex="20" md-font-icon="icon-plus" class="s20"></md-icon><div class="mr-10" flex="80"><md-tooltip md-direction="top" class="md-body-1">Add a new visualization</md-tooltip>add Visualization</div></div></md-button>
                </span>
            </div>
            <div layout="row" layout-xs="column" layout-align="center center" class="">
                    <div class="ph-20 pv-20 md-button" layout="row" layout-align="center center">
                        <md-tooltip md-direction="top" >Completed</md-tooltip>
                        <div>
                            <div layout="row" layout-align="center center"  >
                                <md-icon  md-font-icon="icon-check" class="white-fg green-bg line-height-24 text-center" style="width:24px;border-radius: 50%;font-size:16px"></md-icon>
                            </div>
                        </div>
                        <div class="mh-5 md-subhead" ng-click="addVizState()">
                            Add Visualization
                        </div>
                    </div>
                    <div class="ph-20 pv-20 md-button" layout="row" layout-align="center center" ng-click="editViz()">
                        <md-tooltip md-direction="top" >Completed</md-tooltip>
                        <div>
                            <div layout="row" layout-align="center center"  >
                                <md-icon  md-font-icon="icon-check" class="white-fg green-bg line-height-24 text-center" style="width:24px;border-radius: 50%;font-size:16px"></md-icon>
                            </div>
                        </div>
                        <div class="mh-5 md-subhead">
                            Edit Visualization{{vm.params.id}}
                        </div>
                    </div>
                    <div class="ph-20 pv-20 md-button" layout="row" layout-align="center center" ng-click="null">
                        <md-tooltip md-direction="top" >Step 3: Visualization</md-tooltip>
                        <div>
                            <div layout="row" layout-align="center center" class="md-accent-bg line-height-24 text-center" style="width:24px;border-radius: 50%;">
                            3
                            </div>
                        </div>
                        <div class="mh-5 md-subhead">
                            View Visualization
                        </div>
                    </div>
                  
                </div>
            <div ng-show="showCharts">
               

                <div id="chart_container" ng-show="chart_cont" class="chart-container">

                    <div ng-repeat="chart in charts.titles" class="chart-wrapper-outer">
                        <h3 class="chart_title">{{chart}}</h3>
                        <div id="chart_wrapper_{{$index+1}}" class="chart-wrapper">
                           
                        </div>
                    </div>
                </div>
                <!-- <div id="map_container" ng-show="map_cont" class="map-container">
                    <div ng-repeat="chart in charts.titles" class="chart-wrapper-outer">
                        <h3 class="chart_title">{{chart}}</h3>
                        <div id="custom_map_wrapper_{{$index+1}}">
                        
                        </div>
                    </div>
                </div> -->
                <div id="options_container" class="options-container">
                    <div id="options_wrapper"></div>
                </div>
                <div id="data_container" class="data-container" style="display:none">
                    <div id="data_wrapper"></div>
                </div>
            </div>
            <div ng-show="noCharts" layout="row" layout-align="center center" class="m-20 " style="border: 1px dashed #e8e8e8;">
                <h2 class="p-10">No Chart settings found!</h2>
            </div>
        </md-card>
    </div>

    <div layout="row" ng-if="filters.length != 0" layout-sm="column" layout-xs="column" layout-align="space-around stretch" class="mt-20 mh-10" style="margin-top: -67px;">

        <md-card flex="75" flex-sm="100" flex-xs="100" layout="column" class="md-background-bg " style="box-shadow: 0px 4px 5px -2px rgba(0, 0, 0, 0.2), 0px 7px 10px 1px rgba(0, 0, 0, 0.14), 0px 2px 16px 1px rgba(0, 0, 0, 0.12)">
            <div class="h2 border-bottom " layout="row" >
                <span flex="35" class="pv-15 pl-20">Visualization Preview</span>
                <span flex="65" layout="row" layout-align="end start" class="pv-5 pr-10">
                <md-button ui-sref="app.genvisuals_list" class="ph-15 md-accent md-raised"  layout="row" layout-align="space-between center">
                    <md-icon md-font-icon="icon-chart-bar" class="s20 mr-10"></md-icon>
                    <div><md-tooltip md-direction="top" class="md-body-1">List of all visualization </md-tooltip>All Visualization</div>
                </md-button>
                <md-button class=" md-accent md-raised" layout="row" ng-click="edit()"><div layout="row"><md-icon flex="20" md-font-icon="icon-pencil" class="s20"></md-icon><div class="mr-10" flex="80"><md-tooltip md-direction="top" class="md-body-1">Edit the following datasets</md-tooltip>Edit Visualization</div></div></md-button>
                <md-button class=" md-accent md-raised" layout="row" ui-sref="app.visualizations_add"><div layout="row"><md-icon flex="20" md-font-icon="icon-plus" class="s20"></md-icon><div class="mr-10" flex="80"><md-tooltip md-direction="top" class="md-body-1">Add a new visualization</md-tooltip>add Visualization</div></div></md-button>
                </span>
            </div>
            <div layout="row" layout-xs="column" layout-align="center center" class="">
                    <div class="ph-20 pv-20 md-button" layout="row" layout-align="center center" ui-sref="app.visualizations_add">
                        <md-tooltip md-direction="top" >Completed</md-tooltip>
                        <div>
                            <div layout="row" layout-align="center center"  >
                                <md-icon  md-font-icon="icon-check" class="white-fg green-bg line-height-24 text-center" style="width:24px;border-radius: 50%;font-size:16px"></md-icon>
                            </div>
                        </div>
                        <div class="mh-5 md-subhead" ng-click="addVizState()">
                            Add Visualization
                        </div>
                    </div>
                    <div class="ph-20 pv-20 md-button" layout="row" layout-align="center center" ng-click="editViz()">
                        <md-tooltip md-direction="top" >Completed</md-tooltip>
                        <div>
                            <div layout="row" layout-align="center center"  >
                                <md-icon  md-font-icon="icon-check" class="white-fg green-bg line-height-24 text-center" style="width:24px;border-radius: 50%;font-size:16px"></md-icon>
                            </div>
                        </div>
                        <div class="mh-5 md-subhead">
                            Edit Visualization{{vm.params.id}}
                        </div>
                    </div>
                    <div class="ph-20 pv-20 md-button" layout="row" layout-align="center center" ng-click="null">
                        <md-tooltip md-direction="top" >Step 3: Visualization</md-tooltip>
                        <div>
                            <div layout="row" layout-align="center center" class="md-accent-bg line-height-24 text-center" style="width:24px;border-radius: 50%;">
                            3
                            </div>
                        </div>
                        <div class="mh-5 md-subhead">
                            View Visualization
                        </div>
                    </div>
                  
                </div>
            <div ng-show="showCharts">
               

                <div id="chart_container" ng-show="chart_cont" class="chart-container">

                    <div ng-repeat="chart in charts.titles" class="chart-wrapper-outer">
                        <h3 class="chart_title">{{chart}}</h3>
                        <div id="chart_wrapper_{{$index+1}}" class="chart-wrapper">
                           
                        </div>
                    </div>
                </div>
                <!-- <div id="map_container" ng-show="map_cont" class="map-container">
                    <div ng-repeat="chart in charts.titles" class="chart-wrapper-outer">
                        <h3 class="chart_title">{{chart}}</h3>
                        <div id="custom_map_wrapper_{{$index+1}}">
                        
                        </div>
                    </div>
                </div> -->
                <div id="options_container" class="options-container">
                    <div id="options_wrapper"></div>
                </div>
                <div id="data_container" class="data-container" style="display:none">
                    <div id="data_wrapper"></div>
                </div>
            </div>
            <div ng-show="noCharts" layout="row" layout-align="center center" class="m-20 " style="border: 1px dashed #e8e8e8;">
                <h2 class="p-10">No Chart settings found!</h2>
            </div>
        </md-card>
        <md-card flex="25" flex-sm="25" flex-xs="100" layout="column" class="md-background-bg pt-10 ph-10 " layout-align="start stretch" style="box-shadow: 0px 4px 5px -2px rgba(0, 0, 0, 0.2), 0px 7px 10px 1px rgba(0, 0, 0, 0.14), 0px 2px 16px 1px rgba(0, 0, 0, 0.12)" ng-if="filters.length != 0">
            <div class="h2 border-bottom p-10" >Filters</div>
                <div ng-show="showFilter">
                    <div ng-repeat="(key,filter) in filters track by $index">
                        <div ng-if="filter.column_type == 'range'">
                            <div layout="column" layout-sm="row" layout-wrap layout-align="center stretch">
                                <div flex flex-sm="50" class="p-10" ng-init="slider[key].min = filter.column_min;slider[key].max = filter.column_max;slider.options.floor=filter.column_min;slider.options.column = key">
                                    <label class="font-size-18" style="text-transform: capitalize;">{{filter.column_name}}</label>
                                    <!-- For Doc: https://github.com/angular-slider/angularjs-slider -->
                                    <rzslider
                                        rz-slider-model="slider[key].min"
                                        rz-slider-high="slider[key].max"
                                        rz-slider-options="slider.options"></rzslider>
                                </div>
                            </div>
                        </div>
                        
                        <div ng-if="filter.column_type == 'dropdown'">
                            <div layout="column" layout-sm="row" layout-wrap layout-align="center stretch">
                                <div flex flex-sm="50" class="p-10">
                                    <md-input-container class="md-block" flex-gt-sm>
                                             <label class="font-size-18 font-weight-700" style="text-transform: capitalize;">{{filter.column_name}}</label>
                                             <md-select ng-model="vm.visFilters[key]">
                                                 <md-option ng-repeat="data in filter.column_data track by $index" value="{{data}}" ><!-- selected="{{ $index == 1 ? 'selected' : '' }}" -->
                                                         {{data}}
                                                </md-option>
                                             </md-select>
                                    </md-input-container>
                                </div>
                            </div>
                        </div>

                        <div ng-if="filter.column_type == 'mdropdown'">
                            <div layout="column" layout-sm="row" layout-wrap layout-align="center stretch">
                                <div flex flex-sm="50" class="p-10">
                                    <md-input-container class="md-block" flex-gt-sm>
                                             <label class="font-size-18 font-weight-700" style="text-transform: capitalize;">{{filter.column_name}}</label>
                                             <md-select ng-model="vm.visFiltersMulti[key]" multiple>
                                                 <md-option ng-repeat="data in filter.column_data track by $index" value="{{data}}" ><!-- selected="{{ $index == 1 ? 'selected' : '' }}" -->
                                                         {{data}}
                                                </md-option>
                                             </md-select>
                                    </md-input-container>
                                </div>
                            </div>
                        </div>

                    </div>
                <!--
                <div class="h2 border-bottom p-10" >Chart Settings</div>
                <div layout="column" layout-sm="row" layout-wrap layout-align="center stretch">
                    <div flex flex-sm="50" class="p-10">
                        <md-input-container class="md-block" flex-gt-sm>
                                 <label class="font-size-18 font-weight-700">Chart Type</label>
                                 <md-select ng-model="visualization.charttype" ng-change="setVisualizationType()">
                                     <md-option ng-repeat="chart_type in vm.chart_types" value="{{chart_type.value}}">
                                             {{chart_type.label}}
                                    </md-option>
                                 </md-select>
                        </md-input-container>
                    </div>
                    -->

                        
                        <div style="margin-bottom:30px">
                            <form layout="row" layout-wrap >
                            <md-button type="submit" class="md-raised md-accent submit-button ph-15" aria-label="Save Settings" ng-click="drawVisual('filter')">Filter Data</md-button>
                            <md-button type="submit" class="md-raised md-accent submit-button ph-15" aria-label="Save Settings" ng-click="drawVisual('remove')">Remove Filter</md-button>
                            </form>
                        </div>
                    </div>
                    <div ng-show="filterNotFound" layout="row" layout-align="center center" class="m-20 " style="border: 1px dashed #e8e8e8;">
                        <h2 class="p-10">No filters available!</h2>
                    </div>
                </md-card>


            </div>
    </div>